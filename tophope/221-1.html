<!DOCTYPE html>
<html id="XF" lang="ru-RU" dir="LTR" data-app="public" data-template="thread_view" data-container-key="node-475" data-content-key="thread-221" data-logged-in="false" data-cookie-prefix="xf_" data-style-id="3" class="has-no-js template-thread_view" data-run-jobs="">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Скрипт капчи php | TopHope</title>
<meta name="description" content="Капча это обычное изображение, на котором находится произвольный текст. Рядом с ним располагается текстовое поле, куда пользователь-человек должен ввести..." />
<meta property="og:description" content="Капча это обычное изображение, на котором находится произвольный текст. Рядом с ним располагается текстовое поле, куда пользователь-человек должен ввести изображенный текст.
О капче.
Сегодня, довольно часто бывает, что сайт атакуют «спам-боты». Они постоянно регистрируются или оставляют массу..." />
<meta property="twitter:description" content="Капча это обычное изображение, на котором находится произвольный текст. Рядом с ним располагается текстовое поле, куда пользователь-человек должен ввести изображенный текст.
О капче.
Сегодня..." />
<meta property="og:url" content="https://tophope.ru/threads/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221/" />
<script src="/cdn-cgi/apps/head/pQ0v4jtHsSzdXDC7ZgV1Hu-jjpI.js"></script><link rel="canonical" href="https://tophope.ru/threads/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221/" />
<meta property="og:site_name" content="TopHope" />
<meta property="og:type" content="website" />
<meta property="og:title" content="Скрипт капчи php" />
<meta property="twitter:title" content="Скрипт капчи php" />
<meta name="theme-color" content="#e1e8f8" />
<link rel="preload" href="/styles/fonts/fa/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous" />
<link rel="preload" href="/styles/fonts/fa/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous" />
<link rel="preload" href="/styles/fonts/fa/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous" />
<link rel="stylesheet" href="/css.php?css=public%3Anormalize.css%2Cpublic%3Acore.less%2Cpublic%3Aapp.less&amp;s=3&amp;l=3&amp;d=1573891129&amp;k=edf6cfeed2b8b8213808b1692c79649ca17f77fa" />
<link rel="stylesheet" href="/css.php?css=public%3Afox_avatar_toolbox.less%2Cpublic%3Afox_avt_message_user_details.less%2Cpublic%3Amessage.less%2Cpublic%3Anotices.less%2Cpublic%3Ashare_controls.less%2Cpublic%3Aextra.less&amp;s=3&amp;l=3&amp;d=1573891129&amp;k=635ee9983f7050f57a34205d7d2eecc5afcaba95" />
<script src="/js/xf/preamble.min.js?_v=db17b04c"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-49083153-1"></script>
<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'UA-49083153-1', {
			// 
			
			
		});
	</script>
<script type='text/javascript'>
var xfhtml = document.getElementById('XF');
function addClass(el, className) { if (el.classList) el.classList.add(className); else if (!hasClass(el, className)) el.className += ' ' + className; }
function getCookie(name) { var v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)'); return v ? v[2] : null; }
function setCookie(name, value, days) { var d = new Date; d.setTime(d.getTime() + 24*60*60*1000*days); document.cookie = name + "=" + value + ";path=/;expires=" + d.toGMTString(); }
function deleteCookie(name) { setCookie(name, '', -1); }
function applySetting(settingName, settingOn, allowToggle){
	
	// Theme editor is enabled. Check for selected toggle, otherwise apply default
		if(allowToggle === 1){	
			cookie = getCookie(settingName);
			if( (cookie === 'on') || (!cookie && (settingOn === 1)) ){
				addClass(xfhtml, settingName);
			}
		} else if(settingOn === 1){
			addClass(xfhtml, settingName);
		}
	
}


applySetting('focus-fluid', 0, 1);


applySetting('focus-grid', 0, 1);


applySetting('focus-sidebar-sticky', 1, 1);


applySetting('focus-sidebar-flip', 0, 1);





	var backgroundCookie = getCookie('xenfocusBackground-3');
	if(backgroundCookie){ xfhtml.setAttribute('data-focus-bg', '' + backgroundCookie + '');	} else { xfhtml.setAttribute('data-focus-bg', '1'); }

</script>
</head>
<body data-template="thread_view">
<div class='focus-width'><div class="p-pageWrapper" id="top">

<header class="p-header" id="header">
<div class="p-header-inner">
<div class="p-header-content">
<div class="p-header-logo p-header-logo--image">
<a href="/forum/">
<span>
<img src="https://tophope.ru/images/th.png" alt="TopHope" />
</span>
</a>
</div>
<div class='focus-ad'></div>
<div class='focus-wrap-user'>

<div class="p-nav-opposite">
<div class="p-navgroup p-account p-navgroup--guest">
<a href="/login/" class="p-navgroup-link p-navgroup-link--textual p-navgroup-link--logIn" data-xf-click="overlay" data-follow-redirects="on">
<span class="p-navgroup-linkText">Вход</span>
</a>
<a href="/register/" class="p-navgroup-link p-navgroup-link--textual p-navgroup-link--register" data-xf-click="overlay" data-follow-redirects="on">
<span class="p-navgroup-linkText">Регистрация</span>
</a>
<a href="#" class="p-navgroup-link xenfocus-navgroup-icon" rel="nofollow" data-xf-init="tooltip" title="" data-xenfocus-editor>
<i class="fa--xf far fa-toggle-on" aria-hidden="true"></i>
</a>
</div>
<div class="p-navgroup p-discovery">
<a href="/whats-new/" class="p-navgroup-link p-navgroup-link--iconic p-navgroup-link--whatsnew" title="Что нового?">
<i aria-hidden="true"></i>
<span class="p-navgroup-linkText">Что нового?</span>
</a>
<a href="/search/" class="p-navgroup-link p-navgroup-link--iconic p-navgroup-link--search" data-xf-click="menu" data-xf-key="/" aria-label="Поиск" aria-expanded="false" aria-haspopup="true" title="Поиск">
<i aria-hidden="true"></i>
<span class="p-navgroup-linkText">Поиск</span>
</a>
<div class="menu menu--structural menu--wide" data-menu="menu" aria-hidden="true">
<form action="/search/search" method="post" class="menu-content" data-xf-init="quick-search">
<h3 class="menu-header">Поиск</h3>
<div class="menu-row">
<div class="inputGroup inputGroup--joined">
<input type="text" class="input" name="keywords" placeholder="Поиск..." aria-label="Поиск" data-menu-autofocus="true" />
<select name="constraints" class="js-quickSearch-constraint input" aria-label="Search within">
<option value="">Везде</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;}">Темы</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;,&quot;c&quot;:{&quot;nodes&quot;:[475],&quot;child_nodes&quot;:1}}">Этот форум</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;,&quot;c&quot;:{&quot;thread&quot;:221}}">Эта тема</option>
</select>
</div>
</div>
<div class="menu-row">
<label class="iconic"><input type="checkbox" name="c[title_only]" value="1" /><i aria-hidden="true"></i><span class="iconic-label">Искать только в заголовках</span></label>
</div>
<div class="menu-row">
<div class="inputGroup">
<span class="inputGroup-text" id="ctrl_search_menu_by_member">От:</span>
<input class="input" name="c[users]" data-xf-init="auto-complete" placeholder="Пользователь" aria-labelledby="ctrl_search_menu_by_member" />
</div>
</div>
<div class="menu-footer">
<span class="menu-footer-controls">
<button type="submit" class="button--primary button button--icon button--icon--search"><span class="button-text">Поиск</span></button>
<a href="/search/" class="button"><span class="button-text">Расширенный поиск...</span></a>
</span>
</div>
<input type="hidden" name="_xfToken" value="1583579163,ff9edaa81683f2992700a8383a235c6e" />
</form>
</div>
</div>
</div>
</div>
</div>
</div>
</header>



<div class="p-nav">
<div class="p-nav-inner">
<div class='focus-mobile-navigation'>
<a class="p-nav-menuTrigger" data-xf-click="off-canvas" data-menu=".js-headerOffCanvasMenu" role="button" tabindex="0">
<i aria-hidden="true"></i>
<span class="p-nav-menuText">Меню</span>
</a>
<div class='focus-mobile-logo'>
<a href="/">
<img src="https://tophope.ru/images/th.png" alt="TopHope" />
</a>
</div>
</div>
<div class='focus-wrap-user hide:desktop'>

<div class="p-nav-opposite">
<div class="p-navgroup p-account p-navgroup--guest">
<a href="/login/" class="p-navgroup-link p-navgroup-link--textual p-navgroup-link--logIn" data-xf-click="overlay" data-follow-redirects="on">
<span class="p-navgroup-linkText">Вход</span>
</a>
<a href="/register/" class="p-navgroup-link p-navgroup-link--textual p-navgroup-link--register" data-xf-click="overlay" data-follow-redirects="on">
<span class="p-navgroup-linkText">Регистрация</span>
</a>
<a href="#" class="p-navgroup-link xenfocus-navgroup-icon" rel="nofollow" data-xf-init="tooltip" title="" data-xenfocus-editor>
<i class="fa--xf far fa-toggle-on" aria-hidden="true"></i>
</a>
</div>
<div class="p-navgroup p-discovery">
<a href="/whats-new/" class="p-navgroup-link p-navgroup-link--iconic p-navgroup-link--whatsnew" title="Что нового?">
<i aria-hidden="true"></i>
<span class="p-navgroup-linkText">Что нового?</span>
</a>
<a href="/search/" class="p-navgroup-link p-navgroup-link--iconic p-navgroup-link--search" data-xf-click="menu" data-xf-key="/" aria-label="Поиск" aria-expanded="false" aria-haspopup="true" title="Поиск">
<i aria-hidden="true"></i>
<span class="p-navgroup-linkText">Поиск</span>
</a>
<div class="menu menu--structural menu--wide" data-menu="menu" aria-hidden="true">
<form action="/search/search" method="post" class="menu-content" data-xf-init="quick-search">
<h3 class="menu-header">Поиск</h3>
<div class="menu-row">
<div class="inputGroup inputGroup--joined">
<input type="text" class="input" name="keywords" placeholder="Поиск..." aria-label="Поиск" data-menu-autofocus="true" />
<select name="constraints" class="js-quickSearch-constraint input" aria-label="Search within">
<option value="">Везде</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;}">Темы</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;,&quot;c&quot;:{&quot;nodes&quot;:[475],&quot;child_nodes&quot;:1}}">Этот форум</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;,&quot;c&quot;:{&quot;thread&quot;:221}}">Эта тема</option>
</select>
</div>
</div>
<div class="menu-row">
<label class="iconic"><input type="checkbox" name="c[title_only]" value="1" /><i aria-hidden="true"></i><span class="iconic-label">Искать только в заголовках</span></label>
</div>
<div class="menu-row">
<div class="inputGroup">
<span class="inputGroup-text" id="ctrl_search_menu_by_member">От:</span>
<input class="input" name="c[users]" data-xf-init="auto-complete" placeholder="Пользователь" aria-labelledby="ctrl_search_menu_by_member" />
</div>
</div>
<div class="menu-footer">
<span class="menu-footer-controls">
<button type="submit" class="button--primary button button--icon button--icon--search"><span class="button-text">Поиск</span></button>
<a href="/search/" class="button"><span class="button-text">Расширенный поиск...</span></a>
</span>
</div>
<input type="hidden" name="_xfToken" value="1583579163,ff9edaa81683f2992700a8383a235c6e" />
</form>
</div>
</div>
</div>
</div>

<nav class='focus-wrap-nav'>
<div class="p-nav-scroller hScroller" data-xf-init="h-scroller" data-auto-scroll=".p-navEl.is-selected">
<div class="hScroller-scroll">
<ul class="p-nav-list js-offCanvasNavSource">
<li>
<div class="p-navEl " data-has-children="true">
<a href="/" class="p-navEl-link p-navEl-link--splitMenu " data-nav-id="EWRporta">Главная</a>
<a data-xf-key="1" data-xf-click="menu" data-menu-pos-ref="< .p-navEl" data-arrow-pos-ref="< .p-navEl" class="p-navEl-splitTrigger" role="button" tabindex="0" aria-label="Toggle expanded" aria-expanded="false" aria-haspopup="true"></a>
<div class="menu menu--structural" data-menu="menu" aria-hidden="true">
<div class="menu-content">

<a href="/whats-new/" class="menu-linkRow u-indentDepth0 js-offCanvasCopy " data-nav-id="EWRporta_whatsnaw">Что нового?</a>
<a href="/whats-new/latest-activity" class="menu-linkRow u-indentDepth0 js-offCanvasCopy " rel="nofollow" data-nav-id="EWRporta_latest">Последняя активность</a>
<a href="/ewr-porta/authors/" class="menu-linkRow u-indentDepth0 js-offCanvasCopy " data-nav-id="EWRporta_authors">Авторы</a>
</div>
</div>
</div>
</li>
<li>
<div class="p-navEl is-selected" data-has-children="true">
<svg data-name="curve" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 6"><path d="M0,6H6V0A6,6,0,0,1,0,6Z" /></svg>
<svg data-name="curve" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6 6"><path d="M6,6H0V0A6,6,0,0,0,6,6Z" /></svg>
<a href="/forum/" class="p-navEl-link p-navEl-link--splitMenu " data-nav-id="forums">Форумы</a>
<a data-xf-key="2" data-xf-click="menu" data-menu-pos-ref="< .p-navEl" data-arrow-pos-ref="< .p-navEl" class="p-navEl-splitTrigger" role="button" tabindex="0" aria-label="Toggle expanded" aria-expanded="false" aria-haspopup="true"></a>
<div class="menu menu--structural" data-menu="menu" aria-hidden="true">
<div class="menu-content">

<a href="/whats-new/posts/" class="menu-linkRow u-indentDepth0 js-offCanvasCopy " data-nav-id="newPosts">Новые сообщения</a>
<a href="/search/?type=post" class="menu-linkRow u-indentDepth0 js-offCanvasCopy " data-nav-id="searchForums">Поиск сообщений</a>
</div>
</div>
</div>
</li>
<li>
<div class="p-navEl " data-has-children="true">
<a href="/whats-new/" class="p-navEl-link p-navEl-link--splitMenu " data-nav-id="whatsNew">Что нового?</a>
<a data-xf-key="3" data-xf-click="menu" data-menu-pos-ref="< .p-navEl" data-arrow-pos-ref="< .p-navEl" class="p-navEl-splitTrigger" role="button" tabindex="0" aria-label="Toggle expanded" aria-expanded="false" aria-haspopup="true"></a>
<div class="menu menu--structural" data-menu="menu" aria-hidden="true">
<div class="menu-content">

<a href="/whats-new/posts/" class="menu-linkRow u-indentDepth0 js-offCanvasCopy " rel="nofollow" data-nav-id="whatsNewPosts">Новые сообщения</a>
<a href="/whats-new/latest-activity" class="menu-linkRow u-indentDepth0 js-offCanvasCopy " rel="nofollow" data-nav-id="latestActivity">Последняя активность</a>
</div>
</div>
</div>
</li>
<li>
<div class="p-navEl " data-has-children="true">
<a href="/members/" class="p-navEl-link p-navEl-link--splitMenu " data-nav-id="members">Пользователи</a>
<a data-xf-key="4" data-xf-click="menu" data-menu-pos-ref="< .p-navEl" data-arrow-pos-ref="< .p-navEl" class="p-navEl-splitTrigger" role="button" tabindex="0" aria-label="Toggle expanded" aria-expanded="false" aria-haspopup="true"></a>
<div class="menu menu--structural" data-menu="menu" aria-hidden="true">
<div class="menu-content">

<a href="/online/" class="menu-linkRow u-indentDepth0 js-offCanvasCopy " data-nav-id="currentVisitors">Текущие посетители</a>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
</nav>
<div class='focus-wrap-search'>
<form action="/search/search" method="post">

<div class='focus-search'>
<div class='focus-search-flex'>
<input name="keywords" placeholder="Поиск..." aria-label="Поиск" data-menu-autofocus="true" type="text" />
<div class='focus-search-prefix'><i class="fa--xf far fa-search" aria-hidden="true"></i></div>
</div>
</div>
<div class="focus-search-menu">
<div class="menu-row">
<select name="constraints" class="js-quickSearch-constraint input" aria-label="Search within">
<option value="">Везде</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;}">Темы</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;,&quot;c&quot;:{&quot;nodes&quot;:[475],&quot;child_nodes&quot;:1}}">Этот форум</option>
<option value="{&quot;search_type&quot;:&quot;post&quot;,&quot;c&quot;:{&quot;thread&quot;:221}}">Эта тема</option>
</select>
</div>
<div class="menu-row">
<label class="iconic"><input type="checkbox" name="c[title_only]" value="1" /><i aria-hidden="true"></i><span class="iconic-label">Искать только в заголовках</span></label>
</div>
<div class="menu-row">
<div class="inputGroup">
<span class="inputGroup-text">От:</span>
<input class="input" name="c[users]" data-xf-init="auto-complete" placeholder="Пользователь" aria-labelledby="ctrl_search_menu_by_member" />
</div>
</div>
<div class="menu-footer">
<span class="menu-footer-controls">
<a href="/search/" class="button"><span class="button-text">Фильтры</span></a>
<button type="submit" class="button--primary button button--icon button--icon--search"><span class="button-text">Поиск</span></button>
</span>
</div>
</div>
<input type="hidden" name="_xfToken" value="1583579163,ff9edaa81683f2992700a8383a235c6e" />
</form>
</div>
</div>
</div>

<div class="p-sectionLinks">
<div class="p-sectionLinks-inner hScroller" data-xf-init="h-scroller">
<div class="hScroller-scroll">
<ul class="p-sectionLinks-list">
<li>
<div class="p-navEl ">
<a href="/whats-new/posts/" class="p-navEl-link " data-xf-key="alt+1" data-nav-id="newPosts">Новые сообщения</a>
</div>
</li>
<li>
<div class="p-navEl ">
<a href="/search/?type=post" class="p-navEl-link " data-xf-key="alt+2" data-nav-id="searchForums">Поиск сообщений</a>
</div>
</li>
</ul>
</div>
</div>
</div>

<div class='focus-content'>
<div class="p-body">
<div class="p-body-inner">


<div class='focus-breadcrumb'>
<ul class="p-breadcrumbs " itemscope itemtype="https://schema.org/BreadcrumbList">
<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
<a href="/forum/" itemprop="item">
<span itemprop="name">Форумы</span>
</a>
<meta itemprop="position" content="1" />
</li>
<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
<a href="/forum/#sajtostroenie-programmirovanie-instrumentarij.472" itemprop="item">
<span itemprop="name">Сайтостроение, программирование, инструментарий</span>
</a>
<meta itemprop="position" content="2" />
</li>
<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
<a href="/forum/%D0%A1%D0%BE%D1%84%D1%82-%D0%B8-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B9.475/" itemprop="item">
<span itemprop="name">Софт и инструментарий</span>
</a>
<meta itemprop="position" content="3" />
</li>
</ul>
<ul class='xenfocus-social'>
<li><a href='#vk.com/tophope' target='_blank'></a></li>
</ul>
</div>
<noscript><div class="blockMessage blockMessage--important blockMessage--iconic u-noJsOnly">JavaScript отключён. Чтобы полноценно использовать наш сайт, включите JavaScript в своём браузере.</div></noscript>
<!--[if lt IE 9]><div class="blockMessage blockMessage&#45;&#45;important blockMessage&#45;&#45;iconic">Вы используете устаревший браузер. Этот и другие сайты могут отображаться в нём некорректно.<br />Вам необходимо обновить браузер или попробовать использовать <a href="https://www.google.com/chrome/browser/" target="_blank">другой</a>.</div><![endif]-->
<div class="p-body-header">
<div class="p-title ">
<h1 class="p-title-value">Скрипт капчи php</h1>
</div>
<div class="p-description">
<ul class="listInline listInline--bullet">
<li>
<i class="fa--xf far fa-user" aria-hidden="true" title="Автор темы"></i>
<span class="u-srOnly">Автор темы</span>
<a href="/members/aker.24657/" class="username  u-concealed" dir="auto" data-user-id="24657" data-xf-init="member-tooltip">][aker</a>
</li>
<li>
<i class="fa--xf far fa-clock" aria-hidden="true" title="Дата начала"></i>
<span class="u-srOnly">Дата начала</span>
<a href="/threads/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221/" class="u-concealed"><time class="u-dt" dir="auto" datetime="2012-12-09T01:14:37+0400" data-time="1355001277" data-date-string="9 Декабрь 2012" data-time-string="01:14" title="9 Декабрь 2012 в 01:14">9 Декабрь 2012</time></a>
</li>
</ul>
</div>
</div>
<div class="p-body-main  ">
<div class="p-body-content">
<div class="p-body-pageContent">
<div class="block block--messages" data-xf-init="" data-type="post" data-href="/inline-mod/">
<div class="block-outer"></div>
<div class="block-outer js-threadStatusField"></div>
<div class="block-container lbContainer" data-xf-init="lightbox select-to-quote" data-message-selector=".js-post" data-lb-id="thread-221" data-lb-universal="0">
<div class="block-body js-replyNewMessageContainer">
<article class="message message--post js-post js-inlineModContainer  " data-author="][aker" data-content="post-1378" id="js-post-1378">
<span class="u-anchorTarget" id="post-1378"></span>
<div class="message-inner">
<div class="message-cell message-cell--user">
<section itemscope itemtype="https://schema.org/Person" class="message-user">
<div class="message-userDetails-top">
<h4 class="message-name"><a href="/members/aker.24657/" class="username " dir="auto" data-user-id="24657" data-xf-init="member-tooltip" itemprop="name"><span class="username--style56">][aker</span></a></h4>
<h5 class="userTitle message-userTitle" dir="auto" itemprop="jobTitle">Адекват</h5>
</div>
<div class="message-avatar ">
<div class="message-avatar-wrapper">
<a href="/members/aker.24657/" class="avatar avatar--l" data-user-id="24657" data-xf-init="member-tooltip">
<img src="/data/avatars/l/24/24657.jpg?1355001782" alt="][aker" class="avatar-u24657-l" itemprop="image" />
</a>
</div>
</div>
<div class="message-userDetails">
<h4 class="message-name"><a href="/members/aker.24657/" class="username " dir="auto" data-user-id="24657" data-xf-init="member-tooltip" itemprop="name"><span class="username--style56">][aker</span></a></h4>
<h5 class="userTitle message-userTitle" dir="auto" itemprop="jobTitle">Адекват</h5>
</div>
<div class="message-userExtras">
<dl class="pairs pairs--justified">
<dt>Сообщения</dt>
<dd>23</dd>
</dl>
<dl class="pairs pairs--justified">
<dt>Реакции</dt>
<dd>32</dd>
</dl>
<dl class="pairs pairs--justified">
<dt>Баллы</dt>
<dd>0</dd>
</dl>
</div>
<span class="message-userArrow"></span>
</section>
</div>
<div class="message-cell message-cell--main">
<div class="message-main js-quickEditTarget">
<header class="message-attribution message-attribution--split">
<div class="message-attribution-main">
<a href="/threads/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221/post-1378" class="u-concealed" rel="nofollow">
<time class="u-dt" dir="auto" datetime="2012-12-09T01:14:37+0400" data-time="1355001277" data-date-string="9 Декабрь 2012" data-time-string="01:14" title="9 Декабрь 2012 в 01:14">9 Декабрь 2012</time>
</a>
</div>
<ul class="message-attribution-opposite message-attribution-opposite--list">
<li>
<a href="/threads/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221/post-1378" data-xf-init="share-tooltip" data-href="/posts/1378/share" rel="nofollow">
<i class="fa--xf far fa-share-alt" aria-hidden="true"></i>
</a>
</li>
<li>
<a href="/threads/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221/post-1378" rel="nofollow">
#1
</a>
</li>
</ul>
</header>
<div class="message-content js-messageContent">
<div class="message-userContent lbContainer js-lbContainer " data-lb-id="post-1378" data-lb-caption-desc="][aker &middot; 9 Декабрь 2012 в 01:14">
<article class="message-body js-selectToQuote">
<div class="bbWrapper"><b>Капча</b> это обычное изображение, на котором находится произвольный текст. Рядом с ним располагается текстовое поле, куда пользователь-человек должен ввести изображенный текст.<br />
<span style="font-size: 12px"><b>О капче.</b></span><br />
Сегодня, довольно часто бывает, что сайт атакуют «спам-боты». Они постоянно регистрируются или оставляют массу ненужных Вам сообщений, что в итоге может привеcти к перегрузке баз данных или даже сбою работы сайта.<br />
Для того чтобы решить проблему ботов, придумана специальная защита – «капча» (или «captcha»).<br />
Обычный бот, производя распознавание капчи к правильному ответу не придет, так как подобную картинку сканировать не сможет, а, следовательно, в большинстве случаев будет не возможен автоматический ввод капчи и бот не зарегистрируется и не оставит сообщение.<br />
Ввод капчи осуществляется пользователем, после чего скрипт сравнивает этот текст с сохраненным оригиналом, если все верно, то запрос принимается, иначе выводится соответствующее сообщение.<br />
Итак, для того чтобы оградить свой сайт от большинства простых спам атак, то такая капча PHP Вам очень пригодиться. По сути, это автоматическая капча, изображение которой генерируется специальным PHP скриптом и реализация его более чем проста. Ниже приведем урок по ее созданию, также вы сможете ее скачать, капча с исходником находится тут же.<br />
Задача:<br />
Создать скрипт, программу для капчи с прозрачным фоном, размером 120 на 20 и добавить ее на форму отправки запроса.<br />
Кроме того стоит отметить, чтобы скрипт мог работать, необходимо включить в настройках PHP расширение GD.<br />
Решение:<br />
Пункт 1.<br />
Для примера нам понадобится файл шрифтов comic.ttf, его можно найти в каталоге со шрифтами Вашей операционной системе или скачать из интернета. Сохраняем его в директорию «font» (в каталоге с сайтом).<br />
Далее создаем два файла:<br />
<ol>
<li data-xf-list-type="ol">- captcha.php</li>
<li data-xf-list-type="ol">- index.php</li>
</ol>Пункт 2.<br />
Открываем файл captcha.php и вводим следующий код:<br />
Листинг № 1 - Скрипт капчи<br />
<span style="color: #000000"> <span style="color: #0000bb">&lt;?php <br />
</span><span style="color: #ff8000">// Задаем список символов, используемых в капче </span><span style="color: #0000bb">$capletters </span><span style="color: #007700">= </span><span style="color: #dd0000">'ABCDEFGKIJKLMNOPQRSTUVWXYZ123456789'</span><span style="color: #007700">; </span><span style="color: #ff8000">// Длина капчи 7 знаков </span><span style="color: #0000bb">$captlen </span><span style="color: #007700">= </span><span style="color: #0000bb">7</span><span style="color: #007700">; <br />
</span><span style="color: #ff8000">// Устанавливаем размеры изображения </span><span style="color: #0000bb">$capwidth </span><span style="color: #007700">= </span><span style="color: #0000bb">120</span><span style="color: #007700">; </span><span style="color: #0000bb">$capheight </span><span style="color: #007700">= </span><span style="color: #0000bb">20</span><span style="color: #007700">; <br />
</span><span style="color: #ff8000">// Подключаем шрифт </span><span style="color: #0000bb">$capfont </span><span style="color: #007700">= </span><span style="color: #dd0000">'font/comic.ttf'</span><span style="color: #007700">; <br />
<br />
</span><span style="color: #ff8000">// Размер нашего текста </span><span style="color: #0000bb">$capfontsize </span><span style="color: #007700">= </span><span style="color: #0000bb">14</span><span style="color: #007700">; <br />
</span><span style="color: #ff8000">// Переопределяем HTTP заголовок, чтобы контент нашего <br />
// скрипта представлял собой не текст, а изображение </span><span style="color: #0000bb">header</span><span style="color: #007700">(</span><span style="color: #dd0000">'Content-type: image/png'</span><span style="color: #007700">); <br />
</span><span style="color: #ff8000">// Формируется изображение с указанными ранее размерами </span><span style="color: #0000bb">$capim </span><span style="color: #007700">= </span><span style="color: #0000bb">imagecreatetruecolor</span><span style="color: #007700">(</span><span style="color: #0000bb">$capwidth</span><span style="color: #007700">, </span><span style="color: #0000bb">$capheight</span><span style="color: #007700">); <br />
</span><span style="color: #ff8000">// Устанавливаем необходимость применения альфа канала (прозрачности) </span><span style="color: #0000bb">imagesavealpha</span><span style="color: #007700">(</span><span style="color: #0000bb">$capim</span><span style="color: #007700">, </span><span style="color: #0000bb">true</span><span style="color: #007700">); <br />
</span><span style="color: #ff8000">// Устанавливаем цвет фона, в нашем случае - прозрачный </span><span style="color: #0000bb">$capbg </span><span style="color: #007700">= </span><span style="color: #0000bb">imagecolorallocatealpha</span><span style="color: #007700">(</span><span style="color: #0000bb">$capim</span><span style="color: #007700">, </span><span style="color: #0000bb">0</span><span style="color: #007700">, </span><span style="color: #0000bb">0</span><span style="color: #007700">, </span><span style="color: #0000bb">0</span><span style="color: #007700">, </span><span style="color: #0000bb">127</span><span style="color: #007700">); <br />
</span><span style="color: #ff8000">// Устанавливаем цвет фона изображения </span><span style="color: #0000bb">imagefill</span><span style="color: #007700">(</span><span style="color: #0000bb">$capim</span><span style="color: #007700">, </span><span style="color: #0000bb">0</span><span style="color: #007700">, </span><span style="color: #0000bb">0</span><span style="color: #007700">, </span><span style="color: #0000bb">$capbg</span><span style="color: #007700">); <br />
</span><span style="color: #ff8000">// Задаем начальное значение капчи </span><span style="color: #0000bb">$capcha </span><span style="color: #007700">= </span><span style="color: #dd0000">''</span><span style="color: #007700">; <br />
</span><span style="color: #ff8000">// Запускаем цикл заполнение изображения </span><span style="color: #007700">for (</span><span style="color: #0000bb">$i </span><span style="color: #007700">= </span><span style="color: #0000bb">0</span><span style="color: #007700">; </span><span style="color: #0000bb">$i </span><span style="color: #007700">&lt; </span><span style="color: #0000bb">$captlen</span><span style="color: #007700">; </span><span style="color: #0000bb">$i</span><span style="color: #007700">++){ <br />
</span><span style="color: #ff8000">// Из нашего списка берем «рендомный» символ и добавляем в капчу </span><span style="color: #0000bb">$capcha </span><span style="color: #007700">.= </span><span style="color: #0000bb">$capletters</span><span style="color: #007700">[</span><span style="color: #0000bb">rand</span><span style="color: #007700">(</span><span style="color: #0000bb">0</span><span style="color: #007700">, </span><span style="color: #0000bb">strlen</span><span style="color: #007700">(</span><span style="color: #0000bb">$capletters</span><span style="color: #007700">)-</span><span style="color: #0000bb">1</span><span style="color: #007700">) ]; <br />
</span><span style="color: #ff8000">// Вычисление положения символа по X оси </span><span style="color: #0000bb">$x </span><span style="color: #007700">= (</span><span style="color: #0000bb">$capwidth </span><span style="color: #007700">- </span><span style="color: #0000bb">20</span><span style="color: #007700">) / </span><span style="color: #0000bb">$captlen </span><span style="color: #007700">* </span><span style="color: #0000bb">$i </span><span style="color: #007700">+ </span><span style="color: #0000bb">10</span><span style="color: #007700">; <br />
</span><span style="color: #ff8000">// Добавим «рендомности» в это положение. </span><span style="color: #0000bb">$x </span><span style="color: #007700">= </span><span style="color: #0000bb">rand</span><span style="color: #007700">(</span><span style="color: #0000bb">$x</span><span style="color: #007700">, </span><span style="color: #0000bb">$x</span><span style="color: #007700">+</span><span style="color: #0000bb">5</span><span style="color: #007700">); <br />
</span><span style="color: #ff8000">// Находим положение по Y оси </span><span style="color: #0000bb">$y </span><span style="color: #007700">= </span><span style="color: #0000bb">$capheight </span><span style="color: #007700">- ( (</span><span style="color: #0000bb">$capheight </span><span style="color: #007700">- </span><span style="color: #0000bb">$capfontsize</span><span style="color: #007700">) / </span><span style="color: #0000bb">2 </span><span style="color: #007700">); <br />
</span><span style="color: #ff8000">// Укажем случайный цвет для символа. </span><span style="color: #0000bb">$capcolor </span><span style="color: #007700">= </span><span style="color: #0000bb">imagecolorallocate</span><span style="color: #007700">(</span><span style="color: #0000bb">$capim</span><span style="color: #007700">, </span><span style="color: #0000bb">rand</span><span style="color: #007700">(</span><span style="color: #0000bb">0</span><span style="color: #007700">, </span><span style="color: #0000bb">100</span><span style="color: #007700">), </span><span style="color: #0000bb">rand</span><span style="color: #007700">(</span><span style="color: #0000bb">0</span><span style="color: #007700">, </span><span style="color: #0000bb">100</span><span style="color: #007700">), </span><span style="color: #0000bb">rand</span><span style="color: #007700">(</span><span style="color: #0000bb">0</span><span style="color: #007700">, </span><span style="color: #0000bb">100</span><span style="color: #007700">) ); <br />
</span><span style="color: #ff8000">// Наклон для символа </span><span style="color: #0000bb">$capangle </span><span style="color: #007700">= </span><span style="color: #0000bb">rand</span><span style="color: #007700">(-</span><span style="color: #0000bb">25</span><span style="color: #007700">, </span><span style="color: #0000bb">25</span><span style="color: #007700">); <br />
</span><span style="color: #ff8000">// Рисуем созданный символ, применяя все описанные параметры </span><span style="color: #0000bb">imagettftext</span><span style="color: #007700">(</span><span style="color: #0000bb">$capim</span><span style="color: #007700">, </span><span style="color: #0000bb">$capfontsize</span><span style="color: #007700">, </span><span style="color: #0000bb">$capangle</span><span style="color: #007700">, </span><span style="color: #0000bb">$x</span><span style="color: #007700">, </span><span style="color: #0000bb">$y</span><span style="color: #007700">, </span><span style="color: #0000bb">$capcolor</span><span style="color: #007700">, </span><span style="color: #0000bb">$capfont</span><span style="color: #007700">, </span><span style="color: #0000bb">$capcha</span><span style="color: #007700">[</span><span style="color: #0000bb">$i</span><span style="color: #007700">]); <br />
<br />
} </span><span style="color: #ff8000">// Закрываем цикл <br />
<br />
// Создаем переменную, куда будет сохранена капча, <br />
// с ней будет сравниваться введенный пользователем текст </span><span style="color: #0000bb">session_start</span><span style="color: #007700">(); <br />
</span><span style="color: #0000bb">$_SESSION</span><span style="color: #007700">[</span><span style="color: #dd0000">'capcha'</span><span style="color: #007700">] = </span><span style="color: #0000bb">$capcha</span><span style="color: #007700">; <br />
</span><span style="color: #0000bb">imagepng</span><span style="color: #007700">(</span><span style="color: #0000bb">$capim</span><span style="color: #007700">); </span><span style="color: #ff8000">// Выводим картинку. <br />
</span><span style="color: #0000bb">imagedestroy</span><span style="color: #007700">(</span><span style="color: #0000bb">$capim</span><span style="color: #007700">); </span><span style="color: #ff8000">// Очищаем память. <br />
</span><span style="color: #0000bb">?&gt;</span> </span><br />
Сохраняем файл captcha.php.<br />
Пункт 3.<br />
Открываем файл index.php и добавляем код. Это сама страница в которой будет вводиться капча.<br />
Листинг № 2 - Скрипт файла index.php<br />
<span style="color: #000000"> <span style="color: #0000bb">&lt;?php </span><span style="color: #ff8000">// Проверяем если капча была введена </span><span style="color: #007700">if ( isset(</span><span style="color: #0000bb">$_POST</span><span style="color: #007700">[</span><span style="color: #dd0000">'capcha'</span><span style="color: #007700">]) ) <br />
{ </span><span style="color: #0000bb">$code </span><span style="color: #007700">= </span><span style="color: #0000bb">$_POST</span><span style="color: #007700">[</span><span style="color: #dd0000">'capcha'</span><span style="color: #007700">]; </span><span style="color: #ff8000">// Получаем переданную капчу. </span><span style="color: #0000bb">session_start</span><span style="color: #007700">(); <br />
</span><span style="color: #ff8000">// Сравниваем введенную капчу с сохраненной в переменной в сессии </span><span style="color: #007700">if(isset(</span><span style="color: #0000bb">$_SESSION</span><span style="color: #007700">[</span><span style="color: #dd0000">'capcha'</span><span style="color: #007700">]) &amp;&amp; </span><span style="color: #0000bb">strtoupper</span><span style="color: #007700">(</span><span style="color: #0000bb">$_SESSION</span><span style="color: #007700">[</span><span style="color: #dd0000">'capcha'</span><span style="color: #007700">]) == </span><span style="color: #0000bb">strtoupper</span><span style="color: #007700">(</span><span style="color: #0000bb">$code</span><span style="color: #007700">)) <br />
{echo </span><span style="color: #dd0000">'Верно!'</span><span style="color: #007700">;} <br />
else <br />
{echo </span><span style="color: #dd0000">'Не верно!'</span><span style="color: #007700">;} <br />
</span><span style="color: #ff8000">// Удаляем капчу из сессии </span><span style="color: #007700">unset(</span><span style="color: #0000bb">$_SESSION</span><span style="color: #007700">[</span><span style="color: #dd0000">'capcha'</span><span style="color: #007700">]); <br />
<br />
exit(); <br />
} </span><span style="color: #0000bb">?&gt;</span></span>Пункт 4.<br />
Ниже PHP скрипта, вводим HTML код:<br />
Листинг № 3 - Форма ввода капчи. Это тот же файл index.php<br />
&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;<div class="blockMessage blockMessage--important">Please,
<a href="/login/" data-xf-click="overlay" data-follow-redirects="on"><i class="fas fa-sign-in-alt"></i>
Вход
</a> or
<a href="/register/" data-xf-click="overlay" data-follow-redirects="on"><i class="fas fa-plus-square"></i>
Регистрация
</a> to view URLs content!
</div>&quot;&gt;<br />
&lt;html xmlns=&quot;<div class="blockMessage blockMessage--important">Please,
<a href="/login/" data-xf-click="overlay" data-follow-redirects="on"><i class="fas fa-sign-in-alt"></i>
Вход
</a> or
<a href="/register/" data-xf-click="overlay" data-follow-redirects="on"><i class="fas fa-plus-square"></i>
Регистрация
</a> to view URLs content!
</div>&quot;&gt;<br />
&lt;head&gt;<br />
&lt;title&gt;Тест&lt;/title&gt;<br />
&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=windows-1251&quot; /&gt;<br />
&lt;/head&gt;<br />
&lt;body&gt;<br />
&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo $_SERVER['PHP_SELF']; ?&gt;&quot;&gt;<br />
&lt;img src=&quot;captcha.php&quot; width=&quot;120&quot; height=&quot;20&quot; /&gt;&lt;br /&gt;<br />
Введите капчу: &lt;input type=&quot;text&quot; name=&quot;capcha&quot; /&gt;&lt;br /&gt;<br />
&lt;input type=&quot;submit&quot; value=&quot;Отправить&quot; /&gt;<br />
&lt;/form&gt;<br />
&lt;/body&gt;<br />
&lt;/html&gt;</div>
<div class="js-selectToQuoteEnd">&nbsp;</div>
</article>
</div>
</div>
<footer class="message-footer">
<div class="reactionsBar js-reactionsList ">
</div>
<div class="js-historyTarget message-historyTarget toggleTarget" data-href="trigger-href"></div>
</footer>
</div>
</div>
</div>
</article>
<article class="message message--post js-post js-inlineModContainer  " data-author="HellFire" data-content="post-1384" id="js-post-1384">
<span class="u-anchorTarget" id="post-1384"></span>
<div class="message-inner">
<div class="message-cell message-cell--user">
<section itemscope itemtype="https://schema.org/Person" class="message-user">
<div class="message-userDetails-top">
<h4 class="message-name"><a href="/members/hellfire.1/" class="username " dir="auto" data-user-id="1" data-xf-init="member-tooltip" itemprop="name"><span class="username--style3 username--staff username--moderator username--admin">HellFire</span></a></h4>
<h5 class="userTitle message-userTitle" dir="auto" itemprop="jobTitle">Well-known member</h5>
<div class="userBanner userBanner--staff message-userBanner" dir="auto" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Команда форума</strong><span class="userBanner-after"></span></div>
</div>
<div class="message-avatar ">
<div class="message-avatar-wrapper">
<a href="/members/hellfire.1/" class="avatar avatar--l" data-user-id="1" data-xf-init="member-tooltip">
<img src="/data/avatars/l/0/1.jpg?1570817585" alt="HellFire" class="avatar-u1-l" itemprop="image" />
</a>
</div>
</div>
<div class="message-userDetails">
<h4 class="message-name"><a href="/members/hellfire.1/" class="username " dir="auto" data-user-id="1" data-xf-init="member-tooltip" itemprop="name"><span class="username--style3 username--staff username--moderator username--admin">HellFire</span></a></h4>
<h5 class="userTitle message-userTitle" dir="auto" itemprop="jobTitle">Well-known member</h5>
<div class="userBanner userBanner--staff message-userBanner" dir="auto" itemprop="jobTitle"><span class="userBanner-before"></span><strong>Команда форума</strong><span class="userBanner-after"></span></div>
</div>
<div class="message-userExtras">
<dl class="pairs pairs--justified">
<dt>Сообщения</dt>
<dd>1,293</dd>
</dl>
<dl class="pairs pairs--justified">
<dt>Реакции</dt>
<dd>1,434</dd>
</dl>
<dl class="pairs pairs--justified">
<dt>Баллы</dt>
<dd>113</dd>
</dl>
</div>
<span class="message-userArrow"></span>
</section>
</div>
<div class="message-cell message-cell--main">
<div class="message-main js-quickEditTarget">
<header class="message-attribution message-attribution--split">
<div class="message-attribution-main">
<a href="/threads/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221/post-1384" class="u-concealed" rel="nofollow">
<time class="u-dt" dir="auto" datetime="2012-12-09T02:22:27+0400" data-time="1355005347" data-date-string="9 Декабрь 2012" data-time-string="02:22" title="9 Декабрь 2012 в 02:22">9 Декабрь 2012</time>
</a>
</div>
<ul class="message-attribution-opposite message-attribution-opposite--list">
<li>
<a href="/threads/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221/post-1384" data-xf-init="share-tooltip" data-href="/posts/1384/share" rel="nofollow">
<i class="fa--xf far fa-share-alt" aria-hidden="true"></i>
</a>
</li>
<li>
<a href="/threads/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221/post-1384" rel="nofollow">
#2
</a>
</li>
</ul>
</header>
<div class="message-content js-messageContent">
<div class="message-userContent lbContainer js-lbContainer " data-lb-id="post-1384" data-lb-caption-desc="HellFire &middot; 9 Декабрь 2012 в 02:22">
<article class="message-body js-selectToQuote">
<div class="bbWrapper">сейчас появились разные виды капч, к примеру как на нашем сайте, флэшпереключатель, с ним на автомате работать тяжко =)<br />
А стандартные и гугловские капчи почти любая программа обходит</div>
<div class="js-selectToQuoteEnd">&nbsp;</div>
</article>
</div>
</div>
<footer class="message-footer">
<div class="reactionsBar js-reactionsList is-active">
<ul class="reactionSummary">
<li><span class="reaction reaction--small reaction--1" data-reaction-id="1"><i aria-hidden="true"></i><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="reaction-sprite js-reaction" alt="Like" title="Like" /></span></li>
</ul>
<span class="u-srOnly">Реакции:</span>
<a class="reactionsBar-link" href="/posts/1384/reactions" data-xf-click="overlay" data-cache="false"><bdi>][aker</bdi></a>
</div>
<div class="js-historyTarget message-historyTarget toggleTarget" data-href="trigger-href"></div>
</footer>
</div>
</div>
</div>
</article>
</div>
</div>
<div class="block-outer block-outer--after">
<div class="block-outer-opposite">
<a href="/login/" class="button--link button" data-xf-click="overlay"><span class="button-text">
Войдите или зарегистрируйтесь для ответа.
</span></a>
</div>
</div>
</div>
<div class="blockMessage blockMessage--none">
<div class="shareButtons shareButtons--iconic" data-xf-init="share-buttons" data-page-url="" data-page-title="" data-page-desc="">
<span class="shareButtons-label">Поделиться:</span>
<div class="shareButtons-buttons">
<a class="shareButtons-button shareButtons-button--brand shareButtons-button--facebook" data-href="https://www.facebook.com/sharer.php?u={url}">
<i aria-hidden="true"></i>
<span>Facebook</span>
</a>
<a class="shareButtons-button shareButtons-button--brand shareButtons-button--twitter" data-href="https://twitter.com/intent/tweet?url={url}&amp;text={title}">
<i aria-hidden="true"></i>
<span>Twitter</span>
</a>
<a class="shareButtons-button shareButtons-button--brand shareButtons-button--reddit" data-href="https://reddit.com/submit?url={url}&amp;title={title}">
<i aria-hidden="true"></i>
<span>Reddit</span>
</a>
<a class="shareButtons-button shareButtons-button--brand shareButtons-button--pinterest" data-href="https://pinterest.com/pin/create/bookmarklet/?url={url}&amp;description={title}">
<i aria-hidden="true"></i>
<span>Pinterest</span>
</a>
<a class="shareButtons-button shareButtons-button--brand shareButtons-button--tumblr" data-href="https://www.tumblr.com/widgets/share/tool?canonicalUrl={url}&amp;title={title}">
<i aria-hidden="true"></i>
<span>Tumblr</span>
</a>
<a class="shareButtons-button shareButtons-button--brand shareButtons-button--whatsApp" data-href="https://api.whatsapp.com/send?text={title}&nbsp;{url}">
<i aria-hidden="true"></i>
<span>WhatsApp</span>
</a>
<a class="shareButtons-button shareButtons-button--email" data-href="mailto:?subject={title}&amp;body={url}">
<i aria-hidden="true"></i>
<span>Электронная почта</span>
</a>
<a class="shareButtons-button shareButtons-button--link is-hidden" data-clipboard="{url}">
<i aria-hidden="true"></i>
<span>Ссылка</span>
</a>
</div>
</div>
</div>
</div>
</div>
</div>
<ul class="p-breadcrumbs p-breadcrumbs--bottom" itemscope itemtype="https://schema.org/BreadcrumbList">
<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
<a href="/forum/" itemprop="item">
<span itemprop="name">Форумы</span>
</a>
<meta itemprop="position" content="1" />
</li>
<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
<a href="/forum/#sajtostroenie-programmirovanie-instrumentarij.472" itemprop="item">
<span itemprop="name">Сайтостроение, программирование, инструментарий</span>
</a>
<meta itemprop="position" content="2" />
</li>
<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
<a href="/forum/%D0%A1%D0%BE%D1%84%D1%82-%D0%B8-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B9.475/" itemprop="item">
<span itemprop="name">Софт и инструментарий</span>
</a>
<meta itemprop="position" content="3" />
</li>
</ul>
</div>
</div>
</div> 

<div class="offCanvasMenu offCanvasMenu--nav js-headerOffCanvasMenu" data-menu="menu" aria-hidden="true" data-ocm-builder="navigation">
<div class="offCanvasMenu-backdrop" data-menu-close="true"></div>
<div class="offCanvasMenu-content">
<div class="offCanvasMenu-header">
Меню
<a class="offCanvasMenu-closer" data-menu-close="true" role="button" tabindex="0" aria-label="Закрыть"></a>
</div>
<div class="p-offCanvasRegisterLink">
<div class="offCanvasMenu-linkHolder">
<a href="/login/" class="offCanvasMenu-link" data-xf-click="overlay" data-menu-close="true">
Вход
</a>
</div>
<hr class="offCanvasMenu-separator" />
<div class="offCanvasMenu-linkHolder">
<a href="/register/" class="offCanvasMenu-link" data-xf-click="overlay" data-menu-close="true">
Регистрация
</a>
</div>
<hr class="offCanvasMenu-separator" />
</div>
<div class="js-offCanvasNavTarget"></div>
</div>
</div>

<footer class="p-footer" id="footer">
<div class="p-footer-inner">
<div class="p-footer-row">
<div class="p-footer-row-main">
<ul class="p-footer-linkList">
<li><a href="/misc/style" data-xf-click="overlay" data-xf-init="tooltip" title="Выбор стиля" rel="nofollow">
<i class="fa--xf far fa-paint-brush" aria-hidden="true"></i> Uniform Dark
</a></li>
<li class='xenfocus-footer-icon'><a href="#" rel="nofollow" data-xf-init="tooltip" title="" data-xenfocus-editor><i class="fa--xf far fa-toggle-on" aria-hidden="true"></i></a></li>
<li><a href="/misc/language" data-xf-click="overlay" data-xf-init="tooltip" title="Выбор языка" rel="nofollow">
<i class="fa--xf far fa-globe" aria-hidden="true"></i> Русский - полный перевод</a></li>
</ul>
</div>
<div class="p-footer-row-opposite">
<ul class="p-footer-linkList">
<li><a href="/help/terms/">Условия и правила</a></li>
<li><a href="/help/privacy-policy/">Политика конфиденциальности</a></li>
<li><a href="/help/">Помощь</a></li>
<li><a href="/forum/-/index.rss" target="_blank" class="p-footer-rssLink" title="RSS"><span aria-hidden="true"><i class="fa--xf far fa-rss" aria-hidden="true"></i><span class="u-srOnly">RSS</span></span></a></li>
</ul>
</div>
</div>
<div class='footer-align'>
<div>
</div>
<div>
</div>
</div>
</div>
</footer>
</div></div> 
<div class='focus-editor-wrap'>
<div class='focus-editor-overlay' data-xenfocus-editor></div>
<div class='focus-editor'>
<div class='focus-editor-scroll'>
<div>
<h4 data-focus-text='Background Picker'></h4>
<div class="focus-picker">
<span data-focus-bg='1'><i></i></span>
<span data-focus-bg='2'><i></i></span>
<span data-focus-bg='3'><i></i></span>
<span data-focus-bg='4'><i></i></span>
<span data-focus-bg='5'><i></i></span>
<span data-focus-bg='6'><i></i></span>
</div>
</div>
<div>
<h4 data-focus-text='Customize layout'></h4>
<div class='focus-editor-panel' data-toggle-class='focus-fluid' data-default='off'>
<div class='focus-editor-toggle'>
<input type='radio' name='focus-width' id='focus-fluid-off' />
<input type='radio' name='focus-width' id='focus-fluid-on' />
<i class='focus-toggle'><i></i></i>
</div>
<div class='focus-editor-text' data-setting-title='Fluid width?' data-setting-desc='Enabling this will increase the width of the site so it occupies the width of your browser. Useful for larger screens.'></div>
</div>
<div class='focus-editor-panel' data-toggle-class='focus-grid' data-default='off'>
<div class='focus-editor-toggle'>
<input type='radio' name='focus-grid' id='focus-grid-off' />
<input type='radio' name='focus-grid' id='focus-grid-on' />
<i class='focus-toggle'><i></i></i>
</div>
<div class='focus-editor-text' data-setting-title='Grid layout?' data-setting-desc='If enabled, the forums will be displayed as a grid instead of a table.'></div>
</div>
<div class='focus-editor-panel' data-toggle-class='focus-sidebar-sticky' data-default='on'>
<div class='focus-editor-toggle'>
<input type='radio' name='focus-sidebar-sticky' id='focus-sidebar-sticky-off' />
<input type='radio' name='focus-sidebar-sticky' id='focus-sidebar-sticky-on' />
<i class='focus-toggle'><i></i></i>
</div>
<div class='focus-editor-text' data-setting-title='Sticky sidebar?' data-setting-desc='If enabled, the sidebar will stick to the top of the screen for easy access.'></div>
</div>
<div class='focus-editor-panel' data-toggle-class='focus-sidebar-flip' data-default='off'>
<div class='focus-editor-toggle'>
<input type='radio' name='focus-sidebar-flip' id='focus-sidebar-flip-off' />
<input type='radio' name='focus-sidebar-flip' id='focus-sidebar-flip-on' />
<i class='focus-toggle'><i></i></i>
</div>
<div class='focus-editor-text' data-setting-title='Flip sidebar?' data-setting-desc='Flip the sidebar between the left and right sides.'></div>
</div>
</div>
</div>
<div class='focus-editor-save'>
<button data-xenfocus-editor data-focus-text='Save'></button>
</div>
</div>
</div>
<div class="u-bottomFixer js-bottomFixTarget">
<ul class="notices notices--bottom_fixer  js-notices" data-xf-init="notices" data-type="bottom_fixer" data-scroll-interval="6">
<li class="notice js-notice notice--primary notice--cookie" data-notice-id="-1" data-delay-duration="0" data-display-duration="0" data-auto-dismiss="0" data-visibility="">
<div class="notice-content">
<div class="u-alignCenter">
На данном сайте используются файлы cookie, чтобы персонализировать контент и сохранить Ваш вход в систему, если Вы зарегистрируетесь.<br />
Продолжая использовать этот сайт, Вы соглашаетесь на использование наших файлов cookie.
</div>
<div class="u-inputSpacer u-alignCenter">
<a href="/account/dismiss-notice" class="js-noticeDismiss button--notice button button--icon button--icon--confirm"><span class="button-text">Принять</span></a>
<a href="/help/cookies" class="button--notice button"><span class="button-text">Узнать больше...</span></a>
</div>
</div>
</li>
</ul>
</div>
<div class="u-scrollButtons js-scrollButtons" data-trigger-type="up">
<a href="#top" class="button--scroll button" data-xf-click="scroll-to"><span class="button-text"><i class="fa--xf far fa-arrow-up" aria-hidden="true"></i><span class="u-srOnly">Сверху</span></span></a>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script>window.jQuery || document.write('<script src="/js/vendor/jquery/jquery-3.3.1.min.js?_v=db17b04c"><\/script>')</script>
<script src="/js/vendor/vendor-compiled.js?_v=db17b04c"></script>
<script src="/js/xf/core-compiled.js?_v=db17b04c"></script>
<script src="/js/xf/notice.min.js?_v=db17b04c"></script>
<script src="/styles/xenfocus/js/xenfocus.js?v="></script>
<script>
		jQuery.extend(true, XF.config, {
			// 
			userId: 0,
			enablePush: true,
			pushAppServerKey: 'BIZeYWKbQ0m+6YFx+ZpbcZZsponh8U0LoyTnKpCDBOfKvxwre0wxo/ELTSt+zg3x9RzdVc5Vt9q2uOYOjB8UUXU=',
			url: {
				fullBase: 'https://tophope.ru/',
				basePath: '/',
				css: '/css.php?css=__SENTINEL__&s=3&l=3&d=1573891129',
				keepAlive: '/login/keep-alive'
			},
			cookie: {
				path: '/',
				domain: '',
				prefix: 'xf_',
				secure: true
			},
			csrf: '1583579163,ff9edaa81683f2992700a8383a235c6e',
			js: {"\/js\/xf\/notice.min.js?_v=db17b04c":true,"\/styles\/xenfocus\/js\/xenfocus.js?v=":true},
			css: {"public:fox_avatar_toolbox.less":true,"public:fox_avt_message_user_details.less":true,"public:message.less":true,"public:notices.less":true,"public:share_controls.less":true,"public:extra.less":true},
			time: {
				now: 1583579163,
				today: 1583528400,
				todayDow: 6
			},
			borderSizeFeature: '3px',
			fontAwesomeWeight: 'r',
			enableRtnProtect: true,
			enableFormSubmitSticky: true,
			uploadMaxFilesize: 2097152,
			allowedVideoExtensions: ["m4v","mov","mp4","mp4v","mpeg","mpg","ogv","webm"],
			shortcodeToEmoji: true,
			visitorCounts: {
				conversations_unread: '0',
				alerts_unread: '0',
				total_unread: '0',
				title_count: true,
				icon_indicator: false
			},
			jsState: {},
			publicMetadataLogoUrl: '',
			publicPushBadgeUrl: 'https://tophope.ru/styles/default/xenforo/bell.png'
		});

		jQuery.extend(XF.phrases, {
			// 
			date_x_at_time_y: "{date} в {time}",
			day_x_at_time_y:  "{day} в {time}",
			yesterday_at_x:   "Вчера в {time}",
			x_minutes_ago:    "{minutes} мин. назад",
			one_minute_ago:   "1 минуту назад",
			a_moment_ago:     "Только что",
			today_at_x:       "Сегодня в {time}",
			in_a_moment:      "В настоящее время",
			in_a_minute:      "Менее минуты назад",
			in_x_minutes:     "В течении {minutes} минут",
			later_today_at_x: "Сегодня позже в {time}",
			tomorrow_at_x:    "Завтра в {time}",

			day0: "Воскресенье",
			day1: "Понедельник",
			day2: "Вторник",
			day3: "Среда",
			day4: "Четверг",
			day5: "Пятница",
			day6: "Суббота",

			dayShort0: "Вос",
			dayShort1: "Пон",
			dayShort2: "Вто",
			dayShort3: "Сре",
			dayShort4: "Чет",
			dayShort5: "Пят",
			dayShort6: "Суб",

			month0: "Январь",
			month1: "Февраль",
			month2: "Март",
			month3: "Апрель",
			month4: "Май",
			month5: "Июнь",
			month6: "Июль",
			month7: "Август",
			month8: "Сентябрь",
			month9: "Октябрь",
			month10: "Ноябрь",
			month11: "Декабрь",

			active_user_changed_reload_page: "Ваша сессия истекла. Перезагрузите страницу.",
			server_did_not_respond_in_time_try_again: "Сервер не ответил вовремя. Пожалуйста, попробуйте снова.",
			oops_we_ran_into_some_problems: "Упс! Мы столкнулись с некоторыми проблемами.",
			oops_we_ran_into_some_problems_more_details_console: "Упс! Мы столкнулись с некоторыми проблемами. Пожалуйста, попробуйте позже. Более детальную информацию об ошибке Вы можете посмотреть в консоли браузера.",
			file_too_large_to_upload: "Файл слишком большой для загрузки.",
			uploaded_file_is_too_large_for_server_to_process: "Загруженный файл слишком большой для обработки сервером.",
			files_being_uploaded_are_you_sure: "Файлы все ещё загружаются. Вы действительно хотите отправить эту форму?",
			attach: "Прикрепить файлы",
			rich_text_box: "Текстовое поле с поддержкой форматирования",
			close: "Закрыть",
			link_copied_to_clipboard: "Ссылка скопирована в буфер обмена.",
			text_copied_to_clipboard: "Скопировано в буфер обмена",
			loading: "Загрузка...",

			processing: "Обработка",
			'processing...': "Обработка...",

			showing_x_of_y_items: "Показано {count} из {total} элементов",
			showing_all_items: "Показаны все элементы",
			no_items_to_display: "Нет элементов для отображения",

			push_enable_notification_title: "Push-уведомления для сайта TopHope успешно активированы",
			push_enable_notification_body: "Спасибо за активацию push-уведомлений!"
		});
	</script>
<form style="display:none" hidden="hidden">
<input type="text" name="_xfClientLoadTime" value="" id="_xfClientLoadTime" title="_xfClientLoadTime" tabindex="-1" />
</form>
<script type="text/template" id="xfReactTooltipTemplate">
		<div class="tooltip-content-inner">
			<div class="reactTooltip">
				
					<a href="#" class="reaction reaction--1" data-reaction-id="1"><i aria-hidden="true"></i><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="reaction-sprite js-reaction" alt="Like" title="Like" data-xf-init="tooltip" /></a>
				
					<a href="#" class="reaction reaction--2" data-reaction-id="2"><i aria-hidden="true"></i><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="reaction-sprite js-reaction" alt="Love" title="Love" data-xf-init="tooltip" /></a>
				
					<a href="#" class="reaction reaction--3" data-reaction-id="3"><i aria-hidden="true"></i><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="reaction-sprite js-reaction" alt="Haha" title="Haha" data-xf-init="tooltip" /></a>
				
					<a href="#" class="reaction reaction--4" data-reaction-id="4"><i aria-hidden="true"></i><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="reaction-sprite js-reaction" alt="Wow" title="Wow" data-xf-init="tooltip" /></a>
				
					<a href="#" class="reaction reaction--5" data-reaction-id="5"><i aria-hidden="true"></i><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="reaction-sprite js-reaction" alt="Sad" title="Sad" data-xf-init="tooltip" /></a>
				
					<a href="#" class="reaction reaction--6" data-reaction-id="6"><i aria-hidden="true"></i><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" class="reaction-sprite js-reaction" alt="Angry" title="Angry" data-xf-init="tooltip" /></a>
				
			</div>
		</div>
	</script>
<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "DiscussionForumPosting",
			"@id": "https:\/\/tophope.ru\/threads\/%D0%A1%D0%BA%D1%80%D0%B8%D0%BF%D1%82-%D0%BA%D0%B0%D0%BF%D1%87%D0%B8-php.221\/",
			"headline": "Скрипт капчи php",
			"articleBody": "Капча это обычное изображение, на котором находится произвольный текст. Рядом с ним располагается текстовое поле, куда пользователь-человек должен ввести изображенный текст.\nО капче.\nСегодня, довольно часто бывает, что сайт атакуют «спам-боты». Они постоянно регистрируются или оставляют массу ненужных Вам сообщений, что в итоге может привеcти к перегрузке баз данных или даже сбою работы сайта.\nДля того чтобы решить проблему ботов, придумана специальная защита – «капча» (или «captcha»).\nОбычный бот, производя распознавание капчи к правильному ответу не придет, так как подобную картинку сканировать не сможет, а, следовательно, в большинстве случаев будет не возможен автоматический ввод капчи и бот не зарегистрируется и не оставит сообщение.\nВвод капчи осуществляется пользователем, после чего скрипт сравнивает этот текст с сохраненным оригиналом, если все верно, то запрос принимается, иначе выводится соответствующее сообщение.\nИтак, для того чтобы оградить свой сайт от большинства простых спам атак, то такая капча PHP Вам очень пригодиться. По сути, это автоматическая капча, изображение которой генерируется специальным PHP скриптом и реализация его более чем проста. Ниже приведем урок по ее созданию, также вы сможете ее скачать, капча с исходником находится тут же.\nЗадача:\nСоздать скрипт, программу для капчи с прозрачным фоном, размером 120 на 20 и добавить ее на форму отправки запроса.\nКроме того стоит отметить, чтобы скрипт мог работать, необходимо включить в настройках PHP расширение GD.\nРешение:\nПункт 1.\nДля примера нам понадобится файл шрифтов comic.ttf, его можно найти в каталоге со шрифтами Вашей операционной системе или скачать из интернета. Сохраняем его в директорию «font» (в каталоге с сайтом).\nДалее создаем два файла:\n\n- captcha.php\n- index.php\n\nПункт 2.\nОткрываем файл captcha.php и вводим следующий код:\nЛистинг № 1 - Скрипт капчи\n <?php \n\/\/ Задаем список символов, используемых в капче $capletters = 'ABCDEFGKIJKLMNOPQRSTUVWXYZ123456789';  \/\/ Длина капчи 7 знаков $captlen = 7;  \n\/\/ Устанавливаем размеры изображения $capwidth = 120; $capheight = 20;  \n\/\/ Подключаем шрифт $capfont = 'font\/comic.ttf';  \n\n \/\/ Размер нашего текста $capfontsize = 14; \n\/\/ Переопределяем HTTP заголовок, чтобы контент нашего  \n\/\/ скрипта представлял собой не текст, а изображение header('Content-type: image\/png');  \n\/\/ Формируется изображение с указанными ранее размерами $capim = imagecreatetruecolor($capwidth, $capheight);  \n\/\/ Устанавливаем необходимость применения альфа канала (прозрачности) imagesavealpha($capim, true);  \n\/\/ Устанавливаем цвет фона, в нашем случае - прозрачный $capbg = imagecolorallocatealpha($capim, 0, 0, 0, 127); \n\/\/ Устанавливаем цвет фона изображения imagefill($capim, 0, 0, $capbg);  \n\/\/ Задаем начальное значение капчи $capcha = ''; \n\/\/ Запускаем цикл заполнение изображения for ($i = 0; $i < $captlen; $i++){ \n\/\/ Из нашего списка берем «рендомный» символ и добавляем в капчу $capcha .= $capletters[rand(0, strlen($capletters)-1) ];  \n\/\/ Вычисление положения символа по X оси $x = ($capwidth - 20) \/ $captlen * $i + 10; \n\/\/ Добавим «рендомности» в это положение. $x = rand($x, $x+5);  \n\/\/ Находим положение по Y оси $y = $capheight - ( ($capheight - $capfontsize) \/ 2 );  \n\/\/ Укажем случайный цвет для символа. $capcolor = imagecolorallocate($capim, rand(0, 100), rand(0, 100), rand(0, 100) );  \n\/\/ Наклон для символа $capangle = rand(-25, 25);  \n\/\/ Рисуем созданный символ, применяя все описанные параметры imagettftext($capim, $capfontsize, $capangle, $x, $y, $capcolor, $capfont, $capcha[$i]); \n\n} \/\/ Закрываем цикл \n\n\/\/ Создаем переменную, куда будет сохранена капча,  \n\/\/ с ней будет сравниваться введенный пользователем текст session_start(); \n$_SESSION['capcha'] = $capcha; \nimagepng($capim); \/\/ Выводим картинку. \nimagedestroy($capim); \/\/ Очищаем память. \n?> \nСохраняем файл captcha.php.\nПункт 3.\nОткрываем файл index.php и добавляем код. Это сама страница в которой будет вводиться капча.\nЛистинг № 2 - Скрипт файла index.php\n <?php \/\/ Проверяем если капча была введена if ( isset($_POST['capcha']) ) \n{ $code = $_POST['capcha']; \/\/ Получаем переданную капчу. session_start(); \n\/\/ Сравниваем введенную капчу с сохраненной в переменной в сессии if(isset($_SESSION['capcha']) && strtoupper($_SESSION['capcha']) == strtoupper($code))  \n{echo 'Верно!';} \nelse \n{echo 'Не верно!';} \n\/\/ Удаляем капчу из сессии unset($_SESSION['capcha']);  \n\nexit(); \n} ?>Пункт 4.\nНиже PHP скрипта, вводим HTML код:\nЛистинг № 3 - Форма ввода капчи. Это тот же файл index.php\n\u003C!DOCTYPE html PUBLIC \"-\/\/W3C\/\/DTD XHTML 1.0 Transitional\/\/EN\" \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-transitional.dtd\">\n<html xmlns=\"http:\/\/www.w3.org\/1999\/xhtml\">\n<head>\n<title>Тест<\/title>\n<meta http-equiv=\"Content-Type\" content=\"text\/html;charset=windows-1251\" \/>\n<\/head>\n<body>\n<form method=\"post\" action=\"<?php echo $_SERVER['PHP_SELF']; ?>\">\n<img src=\"captcha.php\" width=\"120\" height=\"20\" \/><br \/>\nВведите капчу: <input type=\"text\" name=\"capcha\" \/><br \/>\n<input type=\"submit\" value=\"Отправить\" \/>\n<\/form>\n<\/body>\n<\/html>",
			"articleSection": "Софт и инструментарий",
			"author": {
				"@type": "Person",
				"name": "][aker"
			},
			"datePublished": "2012-12-09",
			"dateModified": "2012-12-09",
			"image": "https:\/\/tophope.ru\/data\/avatars\/l\/24\/24657.jpg?1355001782",
			"interactionStatistic": {
				"@type": "InteractionCounter",
				"interactionType": "https://schema.org/ReplyAction",
				"userInteractionCount": 1
			}
		}
		</script>
</body>
</html>
